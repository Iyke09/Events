language: node_js

node_js: "7"

install:
- npm install

script:
- npm test

env:
- NODE_ENV=test

cache:
  directories:
  - "node_modules"

services:
- postgresql


before_script:
- createuser events -s -U postgres
- createdb mydb --username=postgres
- sequelize db:migrate

after_success:
- npm run coverage
- npm install -g codeclimate-test-reporter
- codeclimate-test-reporter < coverage/lcov.info

# notifications:
#   webhooks: https://coveralls.io/webhook repo_token=Fdrh3aLsYA3PJOZhsgKJNCeZh3r0rJ4Ud
